swift-tools-version: 5.7

package:
  name: BowlingCompanion

  platforms:
    iOS:
      - .v16

  dependencies:
    - url: "https://github.com/apple/swift-async-algorithms.git"
      from: "0.0.3"
      exports:
        - AsyncAlgorithms
    - url: "https://github.com/pointfreeco/swift-composable-architecture.git"
      from: "0.42.0"
      exports:
        - Dependencies
        - ComposableArchitecture
    - url: "https://github.com/groue/GRDB.swift.git"
      from: "6.0.0"
      exports:
        - GRDB

  feature:
    - name: AlleyEditorFeature
      dependencies:
        - BaseFormFeature
        - PersistenceService
    - name: AlleysListFeature
      dependencies:
        - AlleyEditorFeature
        - AlleysDataProvider
    - name: AppFeature
      dependencies:
        - AlleysListFeature
        - BowlersListFeature
        - GearListFeature
        - SettingsFeature
    - name: BowlerEditorFeature
      dependencies:
        - BaseFormFeature
        - PersistenceService
    - name: BaseFormFeature
    - name: BowlersListFeature
      dependencies:
        - BowlersDataProvider
        - BowlerEditorFeature
        - LeaguesListFeature
    - name: FeatureFlagListFeature
      dependencies:
        - FeatureFlagService
    - name: GameEditorFeature
      dependencies:
        - SharedModelsLibrary
    - name: GamesListFeature
      dependencies:
        - DateTimeLibrary
        - GamesDataProvider
    - name: GearListFeature
      dependencies:
        - GearDataProvider
        - PersistenceService
    - name: LeagueEditorFeature
      dependencies:
        - BaseFormFeature
        - PersistenceService
    - name: LeaguesListFeature
      dependencies:
        - LeaguesDataProvider
        - LeagueEditorFeature
        - RecentlyUsedService
        - SeriesListFeature
    - name: ScoreSheetFeature
      dependencies:
        - SharedModelsLibrary
    - name: SeriesEditorFeature
      dependencies:
        - BaseFormFeature
        - PersistenceService
    - name: SeriesListFeature
      dependencies:
        - DateTimeLibrary
        - SeriesEditorFeature
        - SeriesSidebarFeature
    - name: SeriesSidebarFeature
      dependencies:
        - GamesDataProvider
        - GameEditorFeature
    - name: SettingsFeature
      dependencies:
        - FeatureFlagListFeature

  data_provider:
    - name: AlleysDataProvider
      dependencies:
        implementation:
          - PersistenceService
          - RecentlyUsedService
          - SortingLibrary
          - AsyncAlgorithms
    - name: BowlersDataProvider
      dependencies:
        implementation:
          - PersistenceService
          - RecentlyUsedService
          - SortingLibrary
          - AsyncAlgorithms
    - name: FramesDataProvider
      dependencies:
        implementation:
          - PersistenceService
    - name: GamesDataProvider
      dependencies:
        implementation:
          - PersistenceService
    - name: GearDataProvider
      dependencies:
        implementation:
          - PersistenceService
          - RecentlyUsedService
          - SortingLibrary
          - AsyncAlgorithms
    - name: LeaguesDataProvider
      dependencies:
        implementation:
          - PersistenceService
          - RecentlyUsedService
          - SortingLibrary
          - AsyncAlgorithms
    - name: SeriesDataProvider
      dependencies:
        implementation:
          - PersistenceService

  service:
    - name: FeatureFlagService
      dependencies:
        interface:
          - FeatureFlagLibrary
    - name: FileManagerService
    - name: PersistenceService
      dependencies:
        interface:
          - SharedModelsLibrary
        implementation:
          - FileManagerService
          - SharedPersistenceModelsLibrary
    - name: PreferenceService
      dependencies:
        implementation:
          - ComposableArchitecture
    - name: RecentlyUsedService
      dependencies:
        implementation:
          - PreferenceService

  library:
    - name: DateTimeLibrary
      requires_tests: true
    - name: FeatureFlagLibrary
      requires_tests: true
    - name: SharedModelsLibrary
    - name: SharedPersistenceModelsLibrary
      dependencies:
        - SharedModelsLibrary
        - Dependencies
        - GRDB
    - name: SortingLibrary
